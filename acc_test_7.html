<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>產銷人發財群組聊天</title>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>產銷人發財群組聊天</h1>
        <div class="header-buttons">
            <button class="header-button">⋮</button>
        </div>
    </div>
    
    <div class="chat-container" id="chatContainer">
        <!-- 初始情境 -->
        <div class="message message-user">
            <div class="message-content">我們的新產品下週要上市了，但我還不清楚各部門的準備情況。</div>
            <div class="message-time">12:01</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                您好！我可以幫您查詢各部門的準備情況。您可以使用以下@標籤功能快速獲取相關資訊：<br><br>
                - @生產：查詢生產進度、庫存和供應鏈狀況<br>
                - @銷售：查詢預購訂單、客戶狀態和銷售預測<br>
                - @人力：查詢人員配置、加班安排和人力預算<br>
                - @財務：查詢產品預算、成本分析和財務報表<br>
                - @專案：查詢整體進度、里程碑和風險評估<br><br>
                請問您需要查詢哪個部門的資訊？
            </div>
            <div class="message-time">12:01</div>
        </div>
        
        <!-- 查詢生產情況 -->
        <div class="message message-user">
            <div class="message-content">@生產 請告訴我目前的生產進度和有沒有什麼問題？</div>
            <div class="message-time">12:02</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">正在查詢最新生產數據...</div>
            <div class="message-time">12:02</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                <div class="module-response">
                    <div class="module-title">【生產狀態報告】</div>
                    <div class="module-content">新產品生產進度：
- A100型號：完成84%（4,200/5,000台）- 狀態：正常
- B200型號：完成60%（1,800/3,000台）- 狀態：稍有延遲
- C150型號：完成98%（1,950/2,000台）- 狀態：即將完成

主要問題：
- A料供應商延遲：原定今日到貨的2,000單位延至週三
- 目前庫存僅剩800單位，足夠生產約1,600台產品
- 備用供應商可立即供貨，但價格上漲15%

建議方案：
- 立即向備用供應商下單500單位應急
- 同時保持與原供應商溝通，確保週三到貨</div>
                </div>
                
                您希望採取哪種方案？
                <div class="action-buttons">
                    <button class="action-button">使用備用供應商</button>
                    <button class="action-button">等待原供應商</button>
                    <button class="action-button">調整生產計劃</button>
                </div>
            </div>
            <div class="message-time">12:02</div>
        </div>
        
        <!-- 查詢銷售情況 -->
        <div class="message message-user">
            <div class="message-content">這個A料問題可能會影響我們的交貨能力。@銷售 請告訴我目前的預購情況，特別是大客戶的訂單狀態。</div>
            <div class="message-time">12:03</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">正在整理最新銷售數據...</div>
            <div class="message-time">12:03</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                <div class="module-response">
                    <div class="module-title">【銷售預購報告】</div>
                    <div class="module-content">總預購量：8,500台（目標：10,000台）- 完成率：85%

主要客戶狀態：
- 大眾電子：已確認 2,000台
- 聯合科技：觀望中 1,500台（擔心供貨穩定性）
- 環球通訊：已確認 1,200台
- 其他客戶：已確認 3,800台

本週預購趨勢：
[圖表顯示週一至週日的預購量，呈現上升趨勢]

客戶關注點：
- 聯合科技擔心產品上市後的供貨穩定性
- 大眾電子要求確保首批交貨日期不變</div>
                    <div class="chart-container" id="salesChart"></div>
                </div>
                
                您需要針對哪個客戶制定溝通策略？
                <div class="action-buttons">
                    <button class="action-button">聯合科技</button>
                    <button class="action-button">大眾電子</button>
                    <button class="action-button">環球通訊</button>
                </div>
            </div>
            <div class="message-time">12:03</div>
        </div>
        
        <!-- 查詢人力資源 -->
        <div class="message message-user">
            <div class="message-content">看來我們需要加快生產速度。@人力 我們有足夠的人手來增加產能嗎？有沒有加班安排？</div>
            <div class="message-time">12:04</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">正在查詢人力資源配置...</div>
            <div class="message-time">12:04</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                <div class="module-response">
                    <div class="module-title">【人力資源報告】</div>
                    <div class="module-content">目前人力配置：
- 生產線：45名正職 + 20名臨時人員
- 品管部：12名正職 + 5名臨時人員
- 物流倉儲：18名正職 + 10名臨時人員

加班安排：
- 本週已安排加班總時數：330小時
- 生產線已安排180小時加班
- 品管部已安排60小時加班
- 物流部已安排90小時加班

人力調度建議：
- 可從其他產品線調動5名技術人員支援
- 品管部可安排雙班制確保出貨品質
- 臨時人力還可增加10人（預算已申請）</div>
                </div>
                
                您想採取哪種人力調度方案？
                <div class="action-buttons">
                    <button class="action-button">增加臨時人力</button>
                    <button class="action-button">調動內部人員</button>
                    <button class="action-button">安排更多加班</button>
                </div>
            </div>
            <div class="message-time">12:04</div>
        </div>
        <!-- 查詢財務情況 -->
        <div class="message message-user">
            <div class="message-content">如果我們要增加人力和使用備用供應商，@財務 這會對我們的預算有什麼影響？</div>
            <div class="message-time">12:05</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">正在計算財務影響...</div>
            <div class="message-time">12:05</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                <div class="module-response">
                    <div class="module-title">【財務影響評估】</div>
                    <div class="module-content">成本影響分析：
- 備用供應商A料：+15%（約增加成本75,000元）
- 增加10名臨時人員：每週額外成本60,000元
- 增加加班時數：每週額外成本45,000元

預算狀況：
- 本季緊急應變預算：500,000元（已使用：120,000元）
- 產品線利潤率：原預計28%，調整後約26%
- 投資回報率：原預計18%，調整後約17%

財務建議：
- 短期增加成本可接受，不影響整體財務健康
- 建議與大客戶協商適度提前付款以改善現金流
- 可考慮向供應商申請延長付款期限</div>
                </div>
                
                您希望採取哪種財務策略？
                <div class="action-buttons">
                    <button class="action-button">使用緊急預算</button>
                    <button class="action-button">與客戶協商付款</button>
                    <button class="action-button">與供應商協商付款期限</button>
                </div>
            </div>
            <div class="message-time">12:05</div>
        </div>
        
        <!-- 查詢整體專案進度 -->
        <div class="message message-user">
            <div class="message-content">@專案 請給我一個整體的專案進度報告，我們還有哪些風險需要處理？</div>
            <div class="message-time">12:06</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">正在生成專案報告...</div>
            <div class="message-time">12:06</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                <div class="module-response">
                    <div class="module-title">【專案狀態總覽】</div>
                    <div class="module-content">整體進度：78%（計劃：80%）- 輕微落後

主要里程碑：
- 產品開發：100%（已完成）
- 生產準備：85%（輕微延遲）
- 市場行銷：90%（符合計劃）
- 銷售管道準備：75%（輕微落後）
- 物流配送規劃：70%（需要加速）

風險評估：
- 高風險：A料供應鏈中斷（已識別解決方案）
- 中風險：大客戶訂單確認延遲（需要積極溝通）
- 中風險：物流配送可能延遲（需要備用方案）
- 低風險：產品品質問題（已有嚴格品管流程）

建議行動：
- 立即召開跨部門協調會議
- 每日追蹤A料供應狀況
- 加強與關鍵客戶的溝通頻率</div>
                </div>
                
                您希望優先處理哪個風險？
                <div class="action-buttons">
                    <button class="action-button">供應鏈問題</button>
                    <button class="action-button">客戶訂單確認</button>
                    <button class="action-button">物流配送規劃</button>
                </div>
            </div>
            <div class="message-time">12:06</div>
        </div>
        
        <!-- 決策綜合 -->
        <div class="message message-user">
            <div class="message-content">謝謝各部門的報告。我決定：1. 立即向備用供應商下單，2. 增加臨時人力，3. 與聯合科技加強溝通，4. 使用部分緊急預算。請幫我安排一個跨部門協調會議。</div>
            <div class="message-time">12:07</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">已記錄您的決策。正在安排跨部門協調會議...</div>
            <div class="message-time">12:07</div>
        </div>
        
        <div class="message message-system">
            <div class="message-content">
                <div class="module-response">
                    <div class="module-title">【行動計劃確認】</div>
                    <div class="module-content">已安排跨部門協調會議：
- 時間：今天下午14:00-15:30
- 地點：主會議室A
- 與會人員：生產、銷售、人力、財務部門主管
- 議程：已發送至您的信箱

已啟動的行動：
- 已向備用供應商下單500單位A料（預計明日到貨）
- 已啟動10名臨時人員招募流程（預計後天到位）
- 已安排與聯合科技的視訊會議（今天16:00）
- 已批准使用緊急預算180,000元

接下來24小時內需要您關注：
- 確認備用供應商的出貨通知
- 審核臨時人員的加班安排
- 參加與聯合科技的視訊會議</div>
                </div>
                
                需要為您設置提醒嗎？
                <div class="action-buttons">
                    <button class="action-button">設置全部提醒</button>
                    <button class="action-button">僅重要事項</button>
                    <button class="action-button">稍後設置</button>
                </div>
            </div>
            <div class="message-time">12:07</div>
        </div>
    </div>
    
    <div class="input-container">
        <input type="text" class="message-input" placeholder="輸入訊息...或使用@標籤">
        <button class="send-button">→</button>
    </div>
    
    <div class="tag-menu" id="tagMenu">
        <div class="tag-item">@生產</div>
        <div class="tag-item">@銷售</div>
        <div class="tag-item">@人力</div>
        <div class="tag-item">@財務</div>
        <div class="tag-item">@專案</div>
    </div>
</div>
<script>
    // 模擬發送訊息
    document.querySelector('.send-button').addEventListener('click', function() {
        const input = document.querySelector('.message-input');
        const message = input.value.trim();
        
        if (message) {
            const chatContainer = document.getElementById('chatContainer');
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                              now.getMinutes().toString().padStart(2, '0');
            
            const messageElement = document.createElement('div');
            messageElement.className = 'message message-user';
            messageElement.innerHTML = `
                <div class="message-content">${message}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatContainer.appendChild(messageElement);
            input.value = '';
            
            // 自動滾動到底部
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // 如果訊息包含@標籤，顯示處理中的回應
            if (message.includes('@')) {
                setTimeout(function() {
                    const processingElement = document.createElement('div');
                    processingElement.className = 'message message-system';
                    processingElement.innerHTML = `
                        <div class="message-content">正在處理您的請求...</div>
                        <div class="message-time">${timeString}</div>
                    `;
                    
                    chatContainer.appendChild(processingElement);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 500);
            }
        }
    });
    
    // 按下Enter鍵發送訊息
    document.querySelector('.message-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            document.querySelector('.send-button').click();
        }
    });
    
    // 顯示@標籤選單
    document.querySelector('.message-input').addEventListener('input', function(e) {
        const input = e.target;
        const text = input.value;
        const tagMenu = document.getElementById('tagMenu');
        
        if (text.includes('@') && text.lastIndexOf('@') > text.lastIndexOf(' ')) {
            const rect = input.getBoundingClientRect();
            tagMenu.style.display = 'block';
            tagMenu.style.top = (rect.top - tagMenu.offsetHeight) + 'px';
            tagMenu.style.left = rect.left + 'px';
        } else {
            tagMenu.style.display = 'none';
        }
    });
    
    // 點擊@標籤選項
    document.querySelectorAll('.tag-item').forEach(function(item) {
        item.addEventListener('click', function() {
            const input = document.querySelector('.message-input');
            const tag = this.textContent;
            const text = input.value;
            
            const lastAtIndex = text.lastIndexOf('@');
            if (lastAtIndex !== -1) {
                input.value = text.substring(0, lastAtIndex) + tag + ' ';
            } else {
                input.value += tag + ' ';
            }
            
            document.getElementById('tagMenu').style.display = 'none';
            input.focus();
        });
    });
    
    // 點擊按鈕選項
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('action-button')) {
            const buttonText = e.target.textContent;
            const chatContainer = document.getElementById('chatContainer');
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                              now.getMinutes().toString().padStart(2, '0');
            
            // 用戶選擇顯示在右側
            const messageElement = document.createElement('div');
            messageElement.className = 'message message-user';
            messageElement.innerHTML = `
                <div class="message-content">我選擇: ${buttonText}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // 系統回應顯示在左側
            setTimeout(function() {
                const responseElement = document.createElement('div');
                responseElement.className = 'message message-system';
                responseElement.innerHTML = `
                    <div class="message-content">已記錄您選擇了「${buttonText}」，正在處理中...</div>
                    <div class="message-time">${timeString}</div>
                `;
                
                chatContainer.appendChild(responseElement);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 500);
        }
    });
    
    // 初始化銷售圖表
    function initSalesChart() {
        // 這裡可以使用Chart.js等圖表庫實現真實圖表
        // 簡單模擬一個圖表
        const chartContainer = document.getElementById('salesChart');
        if (chartContainer) {
            chartContainer.innerHTML = `
                <div style="width:100%; height:80px; background:#f0f0f0; border-radius:5px; position:relative; overflow:hidden;">
                    <div style="position:absolute; bottom:0; left:0; width:14%; height:30%; background:#4CAF50;"></div>
                    <div style="position:absolute; bottom:0; left:14%; width:14%; height:40%; background:#4CAF50;"></div>
                    <div style="position:absolute; bottom:0; left:28%; width:14%; height:35%; background:#4CAF50;"></div>
                    <div style="position:absolute; bottom:0; left:42%; width:14%; height:50%; background:#4CAF50;"></div>
                    <div style="position:absolute; bottom:0; left:56%; width:14%; height:65%; background:#4CAF50;"></div>
                    <div style="position:absolute; bottom:0; left:70%; width:14%; height:75%; background:#4CAF50;"></div>
                    <div style="position:absolute; bottom:0; left:84%; width:14%; height:80%; background:#4CAF50;"></div>
                    <div style="position:absolute; top:5px; left:5px; font-size:10px; color:#333;">預購趨勢</div>
                </div>
            `;
        }
    }
    
    // 頁面載入後初始化
    window.addEventListener('load', function() {
        // 初始化圖表
        initSalesChart();
        
        // 自動滾動到底部
        const chatContainer = document.getElementById('chatContainer');
        chatContainer.scrollTop = chatContainer.scrollHeight;
    });
</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
        background-color: #f0f2f5;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }
    
    .container {
        width: 100%;
        max-width: 800px;
        height: 90vh;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
    
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background-color: #0078d4;
        color: white;
    }
    
    .header h1 {
        font-size: 18px;
        font-weight: 600;
    }
    
    .header-buttons {
        display: flex;
    }
    
    .header-button {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        margin-left: 10px;
    }
    
    .chat-container {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
    }
    
    .message {
        display: flex;
        margin-bottom: 15px;
        align-items: flex-end;
    }
    
    .message-user {
        justify-content: flex-end;
    }
    
    .message-system {
        justify-content: flex-start;
    }
    
    .message-content {
        padding: 10px 15px;
        border-radius: 18px;
        max-width: 80%;
        word-wrap: break-word;
    }
    
    .message-user .message-content {
        background-color: #0078d4;
        color: white;
        border-bottom-right-radius: 5px;
    }
    
    .message-system .message-content {
        background-color: #f0f0f0;
        color: #333;
        border-bottom-left-radius: 5px;
    }
    
    .message-time {
        font-size: 12px;
        color: #888;
        margin: 0 5px;
    }
    
    .input-container {
        display: flex;
        padding: 15px;
        border-top: 1px solid #eee;
        position: relative;
    }
    
    .message-input {
        flex: 1;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 24px;
        outline: none;
        font-size: 14px;
    }
    
    .send-button {
        width: 40px;
        height: 40px;
        background-color: #0078d4;
        color: white;
        border: none;
        border-radius: 50%;
        margin-left: 10px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 16px;
    }
    
    .tag-menu {
        position: absolute;
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        display: none;
        z-index: 100;
    }
    
    .tag-item {
        padding: 8px 15px;
        cursor: pointer;
    }
    
    .tag-item:hover {
        background-color: #f0f0f0;
    }
    
    .module-response {
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        margin: 10px 0;
        overflow: hidden;
    }
    
    .module-title {
        background-color: #0078d4;
        color: white;
        padding: 8px 12px;
        font-weight: 600;
        font-size: 14px;
    }
    
    .module-content {
        padding: 12px;
        font-size: 14px;
        white-space: pre-line;
    }
    
    .chart-container {
        margin: 10px 0;
    }
    
    .action-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 15px;
    }
    
    .action-button {
        background-color: #0078d4;
        color: white;
        border: none;
        border-radius: 20px;
        padding: 8px 15px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.2s;
    }
    
    .action-button:hover {
        background-color: #006abc;
    }
    
    /* 響應式設計 */
    @media (max-width: 768px) {
        .container {
            width: 100%;
            height: 100vh;
            border-radius: 0;
        }
        
        .message-content {
            max-width: 90%;
        }
    }
</style>
</body>
</html>

